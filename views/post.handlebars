<div class="container mb-5">
  <div class="row justify-content-center gx-5">
    <div class='row justify-content-center gx-5'>
      <div class='col-md-6 mt-4'>
        <div
          class='card h-100'
          style='background-color: rgba(172, 165, 158, 0.397);'
        >
          <h1
            class='card-header text-light d-flex justify-content-center bg-success fs-3'
          >
            Instrument for sale!
          </h1>
          <div
            class='card-header text-body-tertiary justify-content-center text-center'
            style='height: 50px; align-content: center; font-size: 14px;'
          >
            Posted by
            {{post.user.name}}
            on
            {{format_date post.createdAt}}
            at
            {{format_time post.createdAt}}
          </div>
          <div class='pb-0'>
            <span class='card-title text-center'>
              <a
                href='/posts/{{post.id}}'
                class='post-link text-success fs-4 d-flex justify-content-center text-decoration-none text-shadow mt-2'
              >
                {{post.title}}
              </a>
            </span>
            <div class='card-price mb-3 d-flex justify-content-center'>
              <span
                class='badge mt-2 bg-success w-25 py-3 fs-6 box-shadow'
              >${{post.price}}</span>
            </div>
          </div>
          {{#if post.image}}
            <div
              class='mx-auto flex-grow-1'
              style='display: flex; max-width: 75%; align-items: center;'
            >
              <img
                src='{{post.image}}'
                class='mx-auto'
                alt='Product Image'
                style='display: block; max-width: 100%; max-height: 100%; border-radius: 10px;'
              />
            </div>
          {{else}}
            <svg
              xmlns='http://www.w3.org/2000/svg'
              class='d-block user-select-none ms-4'
              width='100%'
              height='100%'
              aria-label='Placeholder: Image cap'
              focusable='false'
              role='img'
              preserveAspectRatio='xMidYMid slice'
              viewBox='0 0 318 180'
              style='font-size:1.125rem;text-anchor:middle'
            >
              <rect
                y='18'
                x='5'
                rx='8'
                ry='8'
                width='90%'
                height='90%'
                fill='#868e96'
              ></rect>
              <text
                x='46%'
                y='53%'
                text-anchor='middle'
                fill='#dee2e6'
                dy='.3em'
              >Product Image</text>
            </svg>
          {{/if}}
          <div
            class='d-flex mt-4 mb-3 border-top border-bottom px-2 py-2 border-success text-bg-light'
          >
            <p
              class='card-subtitle text-muted mx-auto text-center'
            >{{post.content}}</p>
          </div>
          <div class='card-options mb-2 d-flex justify-content-center'>
            <a href='#' class='card-link text-decoration-none'>Buy now</a>
            <a href='#' id="comment-link" class='card-link text-decoration-none'>Comment</a>
          </div>      

      {{!-- comment cards --}}
    <div id='form-adjust' class="container">
      <div class="row">
        <span id="commentHeader" class="text-center py-2 fs-5">Recent comments:</span>
        <div class="comments">
          {{#each post.comments}}
          <div class="card border m-2 box-shadow" style="border-radius: 10px">
            <div class="card-footer text-muted text-right text-bg-success" style="border-radius: 10px 10px 0px 0px;">
              <small style="color: white">
                Posted by {{user.name}} on {{format_date createdAt}} at {{format_time createdAt}}
              </small>
            </div>
            <div class="card-body">
              <p class="card-text">{{content}}</p>
            </div>
          </div>
          {{/each}}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

{{!-- add comment form --}}
<div class="container d-flex justify-content-center">
<div class="comment-form-container">   
    <form class="form comment-form" id="comment-form" style="display: none">
        <div class="form-group">
            <span id="commentFormHeader">
              <label for="comment" class="form-label mt-5 text-success d-flex justify-content-center fs-4">Add Comment:</label>
            </span>
            <div>
      <textarea class="form-control" id="comment" type="text" rows="3"></textarea>
        <div class="form-group mt-3 d-flex justify-content-center">
            <button class="btn btn-success mb-5" id="comment-form-button" type="submit">Submit</button>
        </div>
    </form>
</div>
</div>


<script src="/js/comment.js"></script>